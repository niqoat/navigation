<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>个人导航</title>
    <meta name="description" content="简洁实用的个人导航页面">
    <link rel="stylesheet" href="static/css/style.css">
</head>
<body>
    <div class="container">
        <div class="search-section">
            <div class="logo">
                <h1>个人导航</h1>
            </div>
            <div class="search-box">
                <form id="searchForm" action="https://www.google.com/search" method="get" target="_blank">
                    <div class="search-engine-selector">
                        <div class="current-engine" id="currentEngine">
                            <span>Google</span>
                            <div class="engine-options">
                                <div class="engine-option" data-engine="google">Google</div>
                                <div class="engine-option" data-engine="baidu">百度</div>
                            </div>
                        </div>
                    </div>
                    <input type="text" id="searchInput" name="q" placeholder="请输入搜索关键词" autocomplete="off">
                    <button type="submit">搜索</button>
                </form>
            </div>
        </div>
        <div class="nav-section" id="navSection">
            <!-- 导航链接将通过JavaScript动态加载 -->
        </div>
        <footer>
            <p>© 2024 个人导航. <a href="https://github.com/niqoat/navigation" target="_blank">GitHub</a></p>
        </footer>
    </div>
    <script src="static/js/links.js"></script>
    <script>
        // 搜索引擎切换逻辑
        const currentEngine = document.getElementById('currentEngine');
        const searchForm = document.getElementById('searchForm');
        const searchInput = document.getElementById('searchInput');

        // 点击显示/隐藏搜索引擎选项
        currentEngine.addEventListener('click', function(e) {
            this.classList.toggle('active');
            e.stopPropagation();
        });

        // 点击其他地方关闭搜索引擎选项
        document.addEventListener('click', function() {
            currentEngine.classList.remove('active');
        });

        // 选择搜索引擎
        document.querySelectorAll('.engine-option').forEach(option => {
            option.addEventListener('click', function(e) {
                const engine = this.getAttribute('data-engine');
                const engineName = this.textContent;
                
                // 更新显示的搜索引擎名称
                currentEngine.querySelector('span').textContent = engineName;
                
                // 更新表单action和搜索参数
                if (engine === 'google') {
                    searchForm.action = 'https://www.google.com/search';
                    searchInput.name = 'q';
                } else if (engine === 'baidu') {
                    searchForm.action = 'https://www.baidu.com/s';
                    searchInput.name = 'wd';
                }
                
                e.stopPropagation();
            });
        });

        // 动态加载导航链接
        function createNavigation(categories) {
            const navSection = document.getElementById('navSection');
            
            categories.forEach(category => {
                const categoryDiv = document.createElement('div');
                categoryDiv.className = 'nav-category';
                
                const titleH2 = document.createElement('h2');
                titleH2.className = 'category-title';
                titleH2.textContent = category.name;
                
                const linkList = document.createElement('ul');
                linkList.className = 'link-list';
                
                category.links.forEach(link => {
                    const li = document.createElement('li');
                    li.className = 'link-item';
                    
                    const a = document.createElement('a');
                    a.href = link.url;
                    a.textContent = link.name;
                    a.target = '_blank';
                    
                    li.appendChild(a);
                    linkList.appendChild(li);
                });
                
                categoryDiv.appendChild(titleH2);
                categoryDiv.appendChild(linkList);
                navSection.appendChild(categoryDiv);
            });
        }

        // 调用函数创建导航
        createNavigation(categories);
    </script>
</body>
</html>
